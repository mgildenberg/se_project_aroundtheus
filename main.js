!function(){"use strict";const e={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=document.querySelector(".profile__edit-button_avatar"),s=document.querySelector("#profile-edit-button"),i=document.querySelector(".profile__add-button"),o=document.querySelector("#profile-title-input"),n=document.querySelector("#profile-description-input"),r=document.forms["add-image-form"],a=document.forms["edit-profile-form"],l=document.forms["edit-avatar-form"];class c{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){console.log("popup class open"),this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"==e.key&&this.close()};_handleClickAway=e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()};setEventListeners(){this._popupElement.addEventListener("mousedown",this._handleClickAway)}}class h extends c{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._handleFormSubmit=t,this._formInputs=this._popupForm.querySelectorAll(".popup__input"),this._submitButton=this._popupForm.querySelectorAll(".popup__button"),this._submitButtonText=this._submitButton.textContent}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}_submitForm(){const e=this._getInputValues();this._handleFormSubmit(e),this.close()}setLoadingState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Save";console.log("we are in",this._popupElement.id),e?(this._submitButtonText="...Saving",console.log("loading state is ",e,"submitButtonText is",this._submitButtonText)):(this._submitButtonText=t,console.log("loading state is ",e,"submitButtonText is",this._submitButtonText))}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(()=>{this._submitForm()}))}close(){this._popupForm.reset(),super.close()}}var u=class{constructor(e,t){this._settings=e,this._form=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){if(this._hasInvalidInput())return this.disableButton();this._enableButton()}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this.disableButton(),this._setEventListeners()}};class d{constructor(e,t,s,i,o){let{name:n,link:r,_id:a,isLiked:l}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleCardClick=s,this._handleTrashClick=i,this._handleLikeClick=o,this._cardId=a,this._isLiked=l,this._cardElement=document.querySelector(this._cardSelector).cloneNode(!0).content.firstElementChild,this._likeButton=this._cardElement.querySelector(".card__like-button")}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{console.log("like button clicked"),this._handleLikeButton(),this.toggleLikeStyle()})),this._cardImageEl.addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})})),this._cardTrashButton=this._cardElement.querySelector(".card__trash-button"),this._cardTrashButton.addEventListener("click",(e=>{console.log("card Trash Button clicked"),this._handleTrashClick(e),console.log("card ID is ",this._cardId)}))}getLikes(){return this._isLiked}_setLikeStyle(){this._isLiked&&this._likeButton.classList.add("card__like-button_active")}toggleLikeStyle(){this._likeButton.classList.toggle("card__like-button_active")}_handleLikeButton(){this._handleLikeClick(this._cardId)}remove(){this._cardElement.remove(),this._cardElement=null}_replaceImageData(){this._cardImageEl.src=this._link,this._cardImageEl.alt=`Photo of ${this._name}`,this._cardTitleEl.textContent=this._name}getView(){return this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._replaceImageData(),this._setLikeStyle(),this._setEventListeners(),this._cardElement}}const _=new class{constructor(e){let{nameSelector:t,jobSelector:s,avatarSelector:i}=e;this._profileTitle=document.querySelector(t),this._profileDescription=document.querySelector(s),this._avatarElement=document.querySelector(i)}getUserInfo(){return this._name=this._profileTitle.textContent,this._job=this._profileDescription.textContent,{name:this._name,job:this._job}}setUserInfo(e){this._profileTitle.textContent=e.name,this._profileDescription.textContent=e.about}setUserAvatar(e){this._avatarElement.src=e.avatar,this._avatarElement.alt=this._profileTitle.textContent}}({nameSelector:".profile__title",jobSelector:".profile__description",avatarSelector:"#profile-avatar"}),p=new class{constructor(e){let{baseURL:t,headers:s}=e;this._baseURL=t,this._headers=s}_checkServerResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseURL}/users/me`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}getInitialCards(){return fetch(`${this._baseURL}/cards`,{headers:this._headers}).then((e=>this._checkServerResponse(e)))}addNewCard(e){return fetch(`${this._baseURL}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>this._checkServerResponse(e)))}deleteCard(e){return console.log("deleteCard",e),fetch(`${this._baseURL}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>this._checkServerResponse(e)))}updateUserInfo(e){console.log("updateUserInfo",e);const t=e.title,s=e.about;return fetch(`${this._baseURL}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then((e=>this._checkServerResponse(e)))}updateAvatar(e){console.log(e);let t=e.link;return console.log(t),fetch(`${this._baseURL}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then((e=>this._checkServerResponse(e)))}addLike(e){return fetch(`${this._baseURL}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then((e=>this._checkServerResponse(e)))}deleteLike(e){return fetch(`${this._baseURL}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then((e=>this._checkServerResponse(e)))}}({baseURL:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"98cf51ba-481b-4eec-9343-23efbe8fbf82","Content-Type":"application/json"}});let m,v=p.getUserInfo(),b=p.getInitialCards();function g(e){const t=new d(e,"#card-template",(e=>{C.open(e)}),(s=>{B.open(),B.setSubmitAction((()=>{B.setLoadingState(!0,"Yes"),p.deleteCard(e._id).then((()=>{B.setLoadingState(!1,"Yes"),t.remove()}))}))}),(e=>{console.log("card isLiked value starts as",t.getLikes()),t.getLikes()?p.deleteLike(e).then((e=>{console.log("card isLiked value is now",e.isLiked)})):p.addLike(e).then((e=>{console.log("card isLiked value is now",e.isLiked)}))}));return t.getView()}Promise.all([v,b]).then((e=>{let[t,s]=e;v=t._id,_.setUserInfo(t),_.setUserAvatar(t),console.log(s),m=new class{constructor(e,t){let{items:s,renderer:i}=e;this._items=s,this._renderer=i,this._cardElementsContainer=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}prependItem(e){this._cardElementsContainer.prepend(e)}}({items:s,renderer:e=>{const t=g(e);m.prependItem(t)}},".cards__list"),m.renderItems()}));const L=new h("#profile-edit-popup",(e=>{L.setLoadingState(!0),p.updateUserInfo(e).then((()=>{p.getUserInfo().then((e=>_.setUserInfo(e))).finally((()=>{L.setLoadingState(!1),L.close()}))}))}));L.setEventListeners();const S=new u(e,a);S.enableValidation();const E=new u(e,r);E.enableValidation(),new u(e,l).enableValidation();const k=new h("#add-image-popup",(e=>{p.addNewCard(e).then((e=>{const t=g(e.data);m.prependItem(t)}))})),f=new h("#edit-avatar-popup",(e=>{f.setLoadingState(!0),p.updateAvatar(e).then((()=>{f.setLoadingState(!1),p.getUserInfo().then((e=>{_.setUserAvatar(e)}))}))}));t.addEventListener("click",(()=>{console.log("edit avatar clicked"),f.open()})),f.setEventListeners();const C=new class extends c{constructor(e){super({popupSelector:e}),this._imageViewerImage=this._popupElement.querySelector(".image-viewer__image"),this._imageViewerTitle=this._popupElement.querySelector(".image-viewer__title")}open(e){super.open(),this._imageViewerImage.src=e.link,this._imageViewerImage.alt=`Photo of ${e.link}`,this._imageViewerTitle.textContent=e.name}}("#popup-image-viewer");C.setEventListeners();const B=new class extends c{constructor(e){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".popup__form"),this._submitButton=this._popupForm.querySelector(".popup__button"),this._submitButtonText=this._submitButton.textContent}setSubmitAction(e){this._callbackFunc=e}setLoadingState(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Save";console.log("we are in",this._popupElement.id),e?(this._submitButtonText="...Saving",console.log("loading state is ",e,"submitButtonText is",this._submitButtonText)):(this._submitButtonText=t,console.log("loading state is ",e,"submitButtonText is",this._submitButtonText))}_submitForm(){this._callbackFunc(),this.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),console.log("clicked Yes"),this._submitForm()}))}close(){super.close()}}("#delete-card-popup");B.setEventListeners(),s.addEventListener("click",(e=>{S.disableButton(),L.open(),function(e){let t=_.getUserInfo();o.value=t.name,n.value=t.job}()})),i.addEventListener("click",(()=>{E.disableButton(),k.open()})),k.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkIsQ0FFQXpKLGVBQUFBLENBQWdCQyxHQUFpQyxJQUF0QkMsRUFBV0MsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBRyxPQUN2Q3BDLFFBQVFDLElBQUksWUFBYUosS0FBS0MsY0FBY3lDLElBQ3hDTCxHQUNGckMsS0FBSzBCLGtCQUFvQixZQUN6QnZCLFFBQVFDLElBQ04sb0JBQ0FpQyxFQUNBLHNCQUNBckMsS0FBSzBCLHFCQUdQMUIsS0FBSzBCLGtCQUFvQlksRUFDekJuQyxRQUFRQyxJQUNOLG9CQUNBaUMsRUFDQSxzQkFDQXJDLEtBQUswQixtQkFHWCxDQUVBUSxXQUFBQSxHQUNFbEMsS0FBSzhMLGdCQUNMOUwsS0FBS1MsT0FDUCxDQUVBUSxpQkFBQUEsR0FDRUcsTUFBTUgsb0JBRU5qQixLQUFLcUIsV0FBV2QsaUJBQWlCLFVBQVdLLElBQzFDQSxFQUFJNEQsaUJBQ0pyRSxRQUFRQyxJQUFJLGVBQ1pKLEtBQUtrQyxhQUFhLEdBRXRCLENBRUF6QixLQUFBQSxHQUVFVyxNQUFNWCxPQUNSLEdMbUlnRCxzQkFDbER1SixFQUFnQi9JLG9CQVpkN0IsRUFBa0JtQixpQkFBaUIsU0FBVXdMLElBRTNDWCxFQUFrQnhILGdCQUNsQnNILEVBQWdCaEwsT0FqRnBCLFNBQXlCNkwsR0FDdkIsSUFBSUMsRUFBY3JGLEVBQWFPLGNBQy9CNUgsRUFBa0IyQyxNQUFRK0osRUFBWWhLLEtBQ3RDekMsRUFBd0IwQyxNQUFRK0osRUFBWTVFLEdBQzlDLENBOEVJNkUsRUFBa0IsSUFicEI1TSxFQUFpQmtCLGlCQUFpQixTQUFTLEtBQ3pDK0ssRUFBaUIxSCxnQkFDakIySCxFQUFlckwsTUFBTSxJQUd2QnFMLEVBQWV0SyxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgLy8gXCIucHJvZmlsZV9faW1hZ2UtY29udGFpbmVyXCJcbiAgXCIucHJvZmlsZV9fZWRpdC1idXR0b25fYXZhdGFyXCJcbik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGFkZE5ld0NhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5cbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IGFkZE5ld0NhcmRGb3JtRWwgPSBkb2N1bWVudC5mb3Jtc1tcImFkZC1pbWFnZS1mb3JtXCJdO1xuY29uc3QgcHJvZmlsZUVkaXRGb3JtRWwgPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtcHJvZmlsZS1mb3JtXCJdO1xuY29uc3QgcHJvZmlsZUVkaXRBdmF0YXJGb3JtRWwgPSBkb2N1bWVudC5mb3Jtc1tcImVkaXQtYXZhdGFyLWZvcm1cIl07XG5cbmV4cG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRBdmF0YXJCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgYWRkTmV3Q2FyZEZvcm1FbCxcbiAgcHJvZmlsZUVkaXRGb3JtRWwsXG4gIHByb2ZpbGVFZGl0QXZhdGFyRm9ybUVsLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICAvLyBvcGVucyBwb3B1cFxuICAgIGNvbnNvbGUubG9nKFwicG9wdXAgY2xhc3Mgb3BlblwiKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICAvLyBjbG9zZXMgcG9wdXBcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICAvLyByZXdyaXRlIGZvciBFc2Mga2V5IGV2ZW50IGxpc3RlbmVyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIC8vIGFycm93IGZ1bmN0aW9uIGJpbmRzIHRoaXMgdG8gdGhlIHBvcHVwIHNvIGV2ZW50IGxpc3RlbmVyIHJlbW92YWwgd29ya3NcbiAgICAvLyBsaXN0ZW5zIGZvciBlc2MgYnV0dG9uXG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBfaGFuZGxlQ2xpY2tBd2F5ID0gKGV2dCkgPT4ge1xuICAgIC8vIGFycm93IGZ1bmN0aW9uIGJpbmRzIHRoaXMgdG8gdGhlIHBvcHVwXG4gICAgaWYgKFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIilcbiAgICApIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQ2xpY2sgQXdheSBpcyB0aGUgcmVtYWluaW5nIGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tBd2F5KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybUlucHV0cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fYnV0dG9uXCIpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XG4gICAgLy8gY29uc3Qgbm9ybWFsU3RhdGUgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0c0RhdGEgPSB7fTtcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dHNEYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0c0RhdGE7XG4gIH1cblxuICBfc3VibWl0Rm9ybSgpIHtcbiAgICBjb25zdCBmb3JtSW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoZm9ybUlucHV0VmFsdWVzKTtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBzZXRMb2FkaW5nU3RhdGUoaXNMb2FkaW5nLCBkZWZhdWx0VGV4dCA9IFwiU2F2ZVwiKSB7XG4gICAgY29uc29sZS5sb2coXCJ3ZSBhcmUgaW5cIiwgdGhpcy5fcG9wdXBFbGVtZW50LmlkKTtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gXCIuLi5TYXZpbmdcIjtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImxvYWRpbmcgc3RhdGUgaXMgXCIsXG4gICAgICAgIGlzTG9hZGluZyxcbiAgICAgICAgXCJzdWJtaXRCdXR0b25UZXh0IGlzXCIsXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSBkZWZhdWx0VGV4dDtcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBcImxvYWRpbmcgc3RhdGUgaXMgXCIsXG4gICAgICAgIGlzTG9hZGluZyxcbiAgICAgICAgXCJzdWJtaXRCdXR0b25UZXh0IGlzXCIsXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9zdWJtaXRGb3JtKCk7XG4gICAgfSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7IC8vIG5lZWQgdGhpcyBsaW5lIHRvIGF2b2lkIHNhdmluZyB0aGUgbGFzdCBpbnB1dFxuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcblxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBkaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBsb29rIGZvciBhbGwgaW5wdXRzIGluc2lkZSBvZiBmb3JtXG4gICAgLy8gbG9vcCB0aHJvdWdoIGFsbCB0aGUgaW5wdXRzIHRvIHNlZSBpZiBhbGwgYXJlIHZhbGlkXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgLy8gaWYgaW5wdXQgaXMgbm90IHZhbGlkXG4gICAgICAgIC8vIGdldCB0aGUgdmFsaWRhdGlvbiBtZXNzYWdlXG4gICAgICAgIC8vIGFkZCB0aGUgZXJyb3IgY2xhc3MgdG8gdGhlIGlucHV0XG4gICAgICAgIC8vIGRpc3BsYXkgZXJyb3IgbWVzc2FnZVxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgLy8gZGlzYWJsZSBidXR0b25cbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICBjb25zdCBmb3JtRWwgPSB0aGlzLl9mb3JtO1xuICAgIC8vIExvb3AgdGhyb3VnaCBmb3JtIGVsZW1lbnRzXG4gICAgLy8gQWRkIEV2ZW50IExpc3RlbmVyXG4gICAgZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgLy8gaW5pdGlhbGl6ZSBmb3JtIHdpdGggdGhlIHN1Ym1pdCBidXR0b24gZGlzYWJsZWQgYnkgZGVmYXVsdFxuICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IG5hbWUsIGxpbmssIF9pZCwgaXNMaWtlZCB9LFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlVHJhc2hDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVUcmFzaENsaWNrID0gaGFuZGxlVHJhc2hDbGljaztcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgLy8gdGhpcy5faGFuZGxlRGVsZXRlQ29uZmlybSA9IGhhbmRsZURlbGV0ZUNvbmZpcm07XG4gICAgdGhpcy5fY2FyZElkID0gX2lkO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSkuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICAvLyB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gXCIuY2FyZF9fbGlrZS1idXR0b25cblxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwibGlrZSBidXR0b24gY2xpY2tlZFwiKTtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdXR0b24oKTtcbiAgICAgIHRoaXMudG9nZ2xlTGlrZVN0eWxlKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX2NhcmRUcmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jYXJkX190cmFzaC1idXR0b25cIlxuICAgICk7XG4gICAgdGhpcy5fY2FyZFRyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2FyZCBUcmFzaCBCdXR0b24gY2xpY2tlZFwiKTtcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQ2xpY2soaW5wdXRWYWx1ZXMpO1xuICAgICAgY29uc29sZS5sb2coXCJjYXJkIElEIGlzIFwiLCB0aGlzLl9jYXJkSWQpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0TGlrZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XG4gIH1cblxuICBfc2V0TGlrZVN0eWxlKCkge1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlTGlrZVN0eWxlKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfVxuXG4gIC8vIHNldExpa2VBY3Rpb24oaGFuZGxlTGlrZUNsaWNrKSB7XG4gIC8vICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAvLyB9XG5cbiAgX2hhbmRsZUxpa2VCdXR0b24oKSB7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2NhcmRJZCk7XG4gIH1cblxuICByZW1vdmUoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgX3JlcGxhY2VJbWFnZURhdGEoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICB9XG5cbiAgZ2V0VmlldygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX3JlcGxhY2VJbWFnZURhdGEoKTtcbiAgICB0aGlzLl9zZXRMaWtlU3R5bGUoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRBdmF0YXJCdXR0b24sXG4gIGFkZE5ld0NhcmRCdXR0b24sXG4gIHByb2ZpbGVUaXRsZUlucHV0LFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgYWRkTmV3Q2FyZEZvcm1FbCxcbiAgcHJvZmlsZUVkaXRGb3JtRWwsXG4gIHByb2ZpbGVFZGl0QXZhdGFyRm9ybUVsLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbmNvbnN0IHBhZ2VVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhclNlbGVjdG9yOiBcIiNwcm9maWxlLWF2YXRhclwiLFxufSk7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVVJMOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjk4Y2Y1MWJhLTQ4MWItNGVlYy05MzQzLTIzZWZiZThmYmY4MlwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmxldCB1c2VyID0gYXBpLmdldFVzZXJJbmZvKCk7XG5sZXQgYXBpQ2FyZHMgPSBhcGkuZ2V0SW5pdGlhbENhcmRzKCk7XG5sZXQgY2FyZFNlY3Rpb247XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIGNhcmREYXRhLFxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAoY2FyZERhdGEpID0+IHtcbiAgICAgIGltYWdlVmlld2VyUG9wdXAub3BlbihjYXJkRGF0YSk7XG4gICAgfSxcbiAgICAoZXZlbnQpID0+IHtcbiAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4gICAgICBkZWxldGVDYXJkUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldExvYWRpbmdTdGF0ZSh0cnVlLCBcIlllc1wiKTtcbiAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZERhdGEuX2lkKS50aGVuKCgpID0+IHtcbiAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuc2V0TG9hZGluZ1N0YXRlKGZhbHNlLCBcIlllc1wiKTtcbiAgICAgICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgKGNhcmRJZCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJjYXJkIGlzTGlrZWQgdmFsdWUgc3RhcnRzIGFzXCIsIGNhcmQuZ2V0TGlrZXMoKSk7XG4gICAgICBsZXQgbGlrZWQgPSBjYXJkLmdldExpa2VzKCk7XG4gICAgICBpZiAoIWxpa2VkKSB7XG4gICAgICAgIGFwaS5hZGRMaWtlKGNhcmRJZCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FyZCBpc0xpa2VkIHZhbHVlIGlzIG5vd1wiLCBkYXRhLmlzTGlrZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwaS5kZWxldGVMaWtlKGNhcmRJZCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FyZCBpc0xpa2VkIHZhbHVlIGlzIG5vd1wiLCBkYXRhLmlzTGlrZWQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICk7XG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcbn1cblxuUHJvbWlzZS5hbGwoW3VzZXIsIGFwaUNhcmRzXSkudGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNdKSA9PiB7XG4gIHVzZXIgPSB1c2VyRGF0YS5faWQ7XG4gIC8vIGNvbnNvbGUubG9nKFwidXNlckRhdGFcIiwgdXNlckRhdGEpO1xuICBwYWdlVXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuICBwYWdlVXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XG4gIGNvbnNvbGUubG9nKGluaXRpYWxDYXJkcyk7XG5cbiAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgICB7XG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgcmVuZGVyZXI6IChpbml0aWFsQ2FyZERhdGEpID0+IHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaW5pdGlhbENhcmREYXRhKTtcbiAgICAgICAgY2FyZFNlY3Rpb24ucHJlcGVuZEl0ZW0oY2FyZCk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgXCIuY2FyZHNfX2xpc3RcIlxuICApO1xuXG4gIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIC8vIHBhZ2VVc2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhLmF2YXRhcilcbn0pO1xuXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oZSkge1xuICBsZXQgY3VycmVudEluZm8gPSBwYWdlVXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBjdXJyZW50SW5mby5uYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IGN1cnJlbnRJbmZvLmpvYjtcbn1cblxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1wb3B1cFwiLFxuICAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAvL3BhZ2VVc2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcyk7XG4gICAgcHJvZmlsZUVkaXRGb3JtLnNldExvYWRpbmdTdGF0ZSh0cnVlKTtcbiAgICBhcGkudXBkYXRlVXNlckluZm8oaW5wdXRWYWx1ZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgYXBpXG4gICAgICAgIC5nZXRVc2VySW5mbygpXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiBwYWdlVXNlckluZm8uc2V0VXNlckluZm8oZGF0YSkpXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICBwcm9maWxlRWRpdEZvcm0uc2V0TG9hZGluZ1N0YXRlKGZhbHNlKTtcbiAgICAgICAgICBwcm9maWxlRWRpdEZvcm0uY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbik7XG5wcm9maWxlRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIHByb2ZpbGVFZGl0Rm9ybUVsKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgYWRkTmV3Q2FyZEZvcm1FbCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uZmlnLFxuICBwcm9maWxlRWRpdEF2YXRhckZvcm1FbFxuKTtcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgYWRkTmV3Q2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtaW1hZ2UtcG9wdXBcIiwgKGlucHV0VmFsdWVzKSA9PiB7XG4gIGFwaS5hZGROZXdDYXJkKGlucHV0VmFsdWVzKS50aGVuKChyZXNwb25zZURhdGFPYmopID0+IHtcbiAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChyZXNwb25zZURhdGFPYmouZGF0YSk7XG4gICAgY2FyZFNlY3Rpb24ucHJlcGVuZEl0ZW0obmV3Q2FyZCk7XG4gIH0pO1xufSk7XG5cbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNlZGl0LWF2YXRhci1wb3B1cFwiLFxuICAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICBlZGl0QXZhdGFyUG9wdXAuc2V0TG9hZGluZ1N0YXRlKHRydWUpO1xuICAgIGFwaS51cGRhdGVBdmF0YXIoaW5wdXRWYWx1ZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgZWRpdEF2YXRhclBvcHVwLnNldExvYWRpbmdTdGF0ZShmYWxzZSk7XG4gICAgICBhcGkuZ2V0VXNlckluZm8oKS50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgICBwYWdlVXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuKTtcblxuZnVuY3Rpb24gYWRkRWRpdEF2YXRhclBvcHVwTGlzdGVuZXJzKCkge1xuICBwcm9maWxlRWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coXCJlZGl0IGF2YXRhciBjbGlja2VkXCIpO1xuICAgIC8vIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTsgLy8gZGlzYWJsZSBidXR0b24gYWhlYWQgb2Ygb3BlbiBmdW5jXG4gICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcbiAgfSk7XG5cbiAgZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG59XG5hZGRFZGl0QXZhdGFyUG9wdXBMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gYWRkTmV3Q2FyZExpc3RlbmVycygpIHtcbiAgYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGFkZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpOyAvLyBkaXNhYmxlIGJ1dHRvbiBhaGVhZCBvZiBvcGVuIGZ1bmNcbiAgICBhZGROZXdDYXJkRm9ybS5vcGVuKCk7XG4gIH0pO1xuXG4gIGFkZE5ld0NhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG59XG5cbmZ1bmN0aW9uIGFkZFByb2ZpbGVGb3JtTGlzdGVuZXJzKCkge1xuICBwcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAvLyBvcGVuIHBvcHVwIG9ubHkgdXBvbiBjbGlja2luZyBlZGl0IGJ1dHRvblxuICAgIGVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVCdXR0b24oKTsgLy8gZGlzYWJsZSBidXR0b24gYWhlYWQgb2Ygb3BlbiBmdW5jXG4gICAgcHJvZmlsZUVkaXRGb3JtLm9wZW4oKTtcbiAgICBmaWxsUHJvZmlsZUZvcm0oZSk7XG4gIH0pO1xufVxuXG5jb25zdCBpbWFnZVZpZXdlclBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwLWltYWdlLXZpZXdlclwiKTtcbmltYWdlVmlld2VyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIiNkZWxldGUtY2FyZC1wb3B1cFwiKTtcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hZGRQcm9maWxlRm9ybUxpc3RlbmVycygpO1xuYWRkTmV3Q2FyZExpc3RlbmVycygpO1xuXG5leHBvcnQgZGVmYXVsdCBlZGl0Rm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBhdmF0YXJTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX25hbWUgPSB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG4gICAgdGhpcy5fam9iID0gdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICAgIHJldHVybiB7IG5hbWU6IHRoaXMuX25hbWUsIGpvYjogdGhpcy5fam9iIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhpbnB1dFZhbHVlcykge1xuICAgIHRoaXMuX3Byb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IGlucHV0VmFsdWVzLm5hbWU7XG4gICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMuYWJvdXQ7XG4gICAgLy8gY29uc29sZS5sb2codGhpcy5fYXZhdGFyRWxlbWVudCk7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGlucHV0VmFsdWVzKSB7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBpbnB1dFZhbHVlcy5hdmF0YXI7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5hbHQgPSB0aGlzLl9wcm9maWxlVGl0bGUudGV4dENvbnRlbnQ7XG4gIH1cbn1cbiIsImNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVSTCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpIHtcbiAgICByZXR1cm4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgLy8gY29uc29sZS5sb2coXCJpbiBnZXRVc2VJbmZvXCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuX2Jhc2VVUkwsIHRoaXMuX2hlYWRlcnMpO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkTmV3Q2FyZChpbnB1dFZhbHVlcykge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiYWRkTmV3Q2FyZFwiLCBpbnB1dFZhbHVlcyk7XG4gICAgLy8gdGhpcy5faGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVVJMfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLFxuICAgICAgICBsaW5rOiBpbnB1dFZhbHVlcy5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICBjb25zb2xlLmxvZyhcImRlbGV0ZUNhcmRcIiwgY2FyZElkKTtcbiAgICAvLyB0aGlzLl9oZWFkZXJzW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCI7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlVXNlckluZm8oaW5wdXRWYWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhcInVwZGF0ZVVzZXJJbmZvXCIsIGlucHV0VmFsdWVzKTtcbiAgICBjb25zdCBpbnB1dFZhbHVlc05hbWUgPSBpbnB1dFZhbHVlcy50aXRsZTtcbiAgICBjb25zdCBpbnB1dFZhbHVlc0Fib3V0ID0gaW5wdXRWYWx1ZXMuYWJvdXQ7XG5cbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGlucHV0VmFsdWVzTmFtZSxcbiAgICAgICAgYWJvdXQ6IGlucHV0VmFsdWVzQWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVBdmF0YXIoaW5wdXRWYWx1ZXMpIHtcbiAgICBjb25zb2xlLmxvZyhpbnB1dFZhbHVlcyk7XG4gICAgbGV0IGlucHV0VmFsdWVzTGluayA9IGlucHV0VmFsdWVzLmxpbms7XG4gICAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXNMaW5rKTtcbiAgICAvLyBjb25zb2xlLmxvZyhcImFkZE5ld0NhcmRcIiwgaW5wdXRWYWx1ZXMpO1xuICAgIC8vIHRoaXMuX2hlYWRlcnNbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIjtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGlucHV0VmFsdWVzTGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrU2VydmVyUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVUkx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tTZXJ2ZXJSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVSTH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1NlcnZlclJlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNhcmRFbGVtZW50c1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZEVsZW1lbnRzU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgLy8gdXNlIHRoaXMgdG8gY3JlYXRlIHRoZSBlbGVtZW50cyBmb3IgcmVuZGVyaW5nXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBwcmVwZW5kSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnRzQ29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9pbWFnZVZpZXdlckltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5pbWFnZS12aWV3ZXJfX2ltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX2ltYWdlVmlld2VyVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmltYWdlLXZpZXdlcl9fdGl0bGVcIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGNhcmREYXRhKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIC8vIHNldCB0aGUgaW1hZ2UgdG8gdGhlIG5hbWUgZmllbGQgb2YgdGhlIG9iamVjdFxuICAgIHRoaXMuX2ltYWdlVmlld2VySW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgICAvLyBzZXQgdGhlIGltYWdlIGFsdCB0ZXh0IHRvIHRoZSBuYW1lIGZpZWxkIG9mIHRoZSBvYmplY3RcbiAgICB0aGlzLl9pbWFnZVZpZXdlckltYWdlLmFsdCA9IGBQaG90byBvZiAke2NhcmREYXRhLmxpbmt9YDtcbiAgICAvLyBzZXQgdGhlIGNhcmQgdGl0bGUgdG8gdGhlIG5hbWUgZmllbGQgb2YgdGhlIG9iamVjdCwgdG9vXG4gICAgdGhpcy5faW1hZ2VWaWV3ZXJUaXRsZS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhEZWxldGUgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICAgIC8vIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oY2FsbGJhY2tGdW5jKSB7XG4gICAgdGhpcy5fY2FsbGJhY2tGdW5jID0gY2FsbGJhY2tGdW5jO1xuICB9XG5cbiAgc2V0TG9hZGluZ1N0YXRlKGlzTG9hZGluZywgZGVmYXVsdFRleHQgPSBcIlNhdmVcIikge1xuICAgIGNvbnNvbGUubG9nKFwid2UgYXJlIGluXCIsIHRoaXMuX3BvcHVwRWxlbWVudC5pZCk7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IFwiLi4uU2F2aW5nXCI7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJsb2FkaW5nIHN0YXRlIGlzIFwiLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIFwic3VibWl0QnV0dG9uVGV4dCBpc1wiLFxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0ID0gZGVmYXVsdFRleHQ7XG4gICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgXCJsb2FkaW5nIHN0YXRlIGlzIFwiLFxuICAgICAgICBpc0xvYWRpbmcsXG4gICAgICAgIFwic3VibWl0QnV0dG9uVGV4dCBpc1wiLFxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25UZXh0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIF9zdWJtaXRGb3JtKCkge1xuICAgIHRoaXMuX2NhbGxiYWNrRnVuYygpOyAvLyB0aGlzIGFjdHVhbGx5IHJ1bnMgdGhlIHBhc3NlZCBmdW5jdGlvbiB1cG9uIGZvcm0gc3VibWl0XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAvLyB0aGlzLmhhbmRsZURlbGV0ZUNsaWNrKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBjb25zb2xlLmxvZyhcImNsaWNrZWQgWWVzXCIpO1xuICAgICAgdGhpcy5fc3VibWl0Rm9ybSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy8gdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7IC8vIG5lZWQgdGhpcyBsaW5lIHRvIGF2b2lkIHNhdmluZyB0aGUgbGFzdCBpbnB1dFxuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInByb2ZpbGVFZGl0QXZhdGFyQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImFkZE5ld0NhcmRGb3JtRWwiLCJmb3JtcyIsInByb2ZpbGVFZGl0Rm9ybUVsIiwicHJvZmlsZUVkaXRBdmF0YXJGb3JtRWwiLCJQb3B1cCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJ0aGlzIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJjb25zb2xlIiwibG9nIiwiY2xhc3NMaXN0IiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIl9oYW5kbGVDbGlja0F3YXkiLCJ0YXJnZXQiLCJjb250YWlucyIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtSW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uVGV4dCIsInRleHRDb250ZW50IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzRGF0YSIsImZvckVhY2giLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsIl9zdWJtaXRGb3JtIiwiZm9ybUlucHV0VmFsdWVzIiwic2V0TG9hZGluZ1N0YXRlIiwiaXNMb2FkaW5nIiwiZGVmYXVsdFRleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJpZCIsInJlc2V0Iiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9zZXR0aW5ncyIsIl9mb3JtIiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfaW5wdXRFbHMiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVUcmFzaENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlVHJhc2hDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfY2FyZElkIiwiX2lzTGlrZWQiLCJfY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJfbGlrZUJ1dHRvbiIsIl9oYW5kbGVMaWtlQnV0dG9uIiwidG9nZ2xlTGlrZVN0eWxlIiwiX2NhcmRJbWFnZUVsIiwiX2NhcmRUcmFzaEJ1dHRvbiIsImlucHV0VmFsdWVzIiwiZ2V0TGlrZXMiLCJfc2V0TGlrZVN0eWxlIiwidG9nZ2xlIiwiX3JlcGxhY2VJbWFnZURhdGEiLCJzcmMiLCJhbHQiLCJfY2FyZFRpdGxlRWwiLCJnZXRWaWV3IiwicGFnZVVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9wcm9maWxlVGl0bGUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiX2F2YXRhckVsZW1lbnQiLCJnZXRVc2VySW5mbyIsIl9qb2IiLCJqb2IiLCJzZXRVc2VySW5mbyIsImFib3V0Iiwic2V0VXNlckF2YXRhciIsImF2YXRhciIsImFwaSIsImJhc2VVUkwiLCJoZWFkZXJzIiwiX2Jhc2VVUkwiLCJfaGVhZGVycyIsIl9jaGVja1NlcnZlclJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsImdldEluaXRpYWxDYXJkcyIsImFkZE5ld0NhcmQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJ1cGRhdGVVc2VySW5mbyIsImlucHV0VmFsdWVzTmFtZSIsInRpdGxlIiwiaW5wdXRWYWx1ZXNBYm91dCIsInVwZGF0ZUF2YXRhciIsImlucHV0VmFsdWVzTGluayIsImFkZExpa2UiLCJkZWxldGVMaWtlIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwidXNlciIsImFwaUNhcmRzIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZCIsImltYWdlVmlld2VyUG9wdXAiLCJldmVudCIsImRlbGV0ZUNhcmRQb3B1cCIsInNldFN1Ym1pdEFjdGlvbiIsImRhdGEiLCJhbGwiLCJ1c2VyRGF0YSIsImluaXRpYWxDYXJkcyIsImNhcmRFbGVtZW50c1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jYXJkRWxlbWVudHNDb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJwcmVwZW5kSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiaW5pdGlhbENhcmREYXRhIiwicHJvZmlsZUVkaXRGb3JtIiwiZmluYWxseSIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJhZGROZXdDYXJkRm9ybSIsInJlc3BvbnNlRGF0YU9iaiIsIm5ld0NhcmQiLCJlZGl0QXZhdGFyUG9wdXAiLCJfaW1hZ2VWaWV3ZXJJbWFnZSIsIl9pbWFnZVZpZXdlclRpdGxlIiwiY2FsbGJhY2tGdW5jIiwiX2NhbGxiYWNrRnVuYyIsImUiLCJjdXJyZW50SW5mbyIsImZpbGxQcm9maWxlRm9ybSJdLCJzb3VyY2VSb290IjoiIn0=